<!-- TOC -->

- [1. 拍照](#1-拍照)
    - [1.1. 文档版本](#11-文档版本)
    - [1.2. 功能说明](#12-功能说明)
    - [1.3. 开发指南](#13-开发指南)
        - [1.3.1. 插入可用于拍照的视图](#131-插入可用于拍照的视图)
        - [1.3.2. 修改视图的拍摄参数](#132-修改视图的拍摄参数)
        - [1.3.3. 设置拍摄视图的视图id](#133-设置拍摄视图的视图id)
        - [1.3.4. 获取拍摄视图的视图id](#134-获取拍摄视图的视图id)
        - [1.3.5. 拍摄照片](#135-拍摄照片)
        - [1.3.6. 开始摄像](#136-开始摄像)
        - [1.3.7. 结束摄像](#137-结束摄像)
        - [1.3.8. 回收相机视图](#138-回收相机视图)

<!-- /TOC -->
# 1. 拍照
## 1.1. 文档版本

|文档版本|修改日期|修改概述|
|:--|:--|:--|
|0.8|2018-12-10|初始版本|

--------------------------
## 1.2. 功能说明
小程序宿主需要实现Camera模块的相关功能以支持小程序使用。

## 1.3. 开发指南

### 1.3.1. 插入可用于拍照的视图

小程序想要自行添加拍摄视图时会调用次方法，宿主需要实现次方法，params为小程序指定的拍摄参数，返回值为有拍摄能力的视图。
> 注意拍摄视图需要全局唯一，建议定义为单例。

```
/**
 * 插入拍摄视图
 *
 * @param params 拍摄参数
 * @{
 *       @"devicePosition": string, // @"back"或者@"front"，前镜头或后镜头
 *       @"flash": string, // @"on"或者@"off", 开闪光灯或关闪光灯
 *       @"positon": dictionary, // 视图座标信息，key分别为@"top",@"left",@"width",@"height"
 * } 
 * @return 有拍摄能力的视图
 */

+ (UIView *)cameraPlayerViewWithParams:(NSDictionary *)params;
```

### 1.3.2. 修改视图的拍摄参数

小程序需要更新已存在的拍摄视图的拍摄参数时会调用次方法。

```
/**
 * 更新插入拍摄视图的拍摄参数
 *
 * @param params 拍摄参数
 * @{
 *       @"devicePosition": string, // @"back"或者@"front"，前镜头或后镜头
 *       @"flash": string, // @"on"或者@"off", 开闪光灯或关闪光灯
 *       @"positon": dictionary, // 视图座标信息，key分别为@"top",@"left",@"width",@"height"
 * } 
 */

+ (void)updateCameraWithParams:(NSDictionary *)params;
```

### 1.3.3. 设置拍摄视图的视图id

小程序调用创建拍摄视图的时候会为该视图绑定一个唯一id，宿主需要实现此功能，

```
/**
 * 设置拍摄视图的视图id
 *
 * @param cameraId 视图id
 */
+ (void)setCameraId:(NSString *)cameraId;
```

### 1.3.4. 获取拍摄视图的视图id

获取方法3中绑定的唯一id

```
/**
 * 获取拍摄视图的视图id
 *
 * @return  视图id
 */
+ (NSString *)cameraId;
```


### 1.3.5. 拍摄照片

```
/**
 * 拍摄照片
 * @param params 摄影参数
 * @{
 *       @"quality": string, // @"low"或者@"normal"或者@"high"，拍摄质量
 *
 *
 * @param imageDir 保存照片路径
 * @param complection 拍摄完成回调
 */

+ (void)takePhotoWithParams:(NSDictionary *)params imageDir:(NSString *)imageDir complection:(void(^)(NSString *imagePath))complection;
```

### 1.3.6. 开始摄像

```
/**
 * 开始摄像
 * @param params 摄影参数(暂未使用，不会传递有效信息)
 *
 * @param videoDir 保存照片路径
 * @param complection 拍摄完成回调
 */
+ (void)startRecordWithParams:(NSDictionary *)params videoDir:(NSString *)videoDir complection:(void(^)(NSString *thumbImagePath,NSString *videoPath))complection;
```

### 1.3.7. 结束摄像
```
/**
 * 结束摄像
 * @param params 摄影参数(暂未使用，不会传递有效信息)
 *
 * @param videoDir 保存照片路径
 * @param complection 拍摄完成回调
 */
+ (void)stopRecordWithParams:(NSDictionary *)params videoDir:(NSString *)videoDir complection:(void(^)(NSString *thumbImagePath,NSString *videoPath))complection;
```


### 1.3.8. 回收相机视图

小程序移除拍摄视图后会调用此能力，宿主需要对之前生成的拍摄视图做必要的回收。

```
+ (void)stopRun;
```
