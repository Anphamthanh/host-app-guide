<!-- TOC -->

- [1. 收货地址](#1-收货地址)
    - [1.1. 文档版本](#11-文档版本)
    - [1.2. 功能说明](#12-功能说明)
    - [1.3. 开发指南](#13-开发指南)
        - [1.3.1. 收货地址字段说明](#131-收货地址字段说明)
        - [1.3.2. 接口请求和返回数据说明](#132-接口请求和返回数据说明)
            - [1.3.2.1. 用户添加收货地址](#1321-用户添加收货地址)
            - [1.3.2.2. 用户查询收货地址](#1322-用户查询收货地址)
            - [1.3.2.3. 用户修改收货地址](#1323-用户修改收货地址)
            - [1.3.2.4. 用户地址默认修改](#1324-用户地址默认修改)
            - [1.3.2.5. 用户删除收货地址](#1325-用户删除收货地址)
            - [1.3.2.6. 获取地址数据](#1326-获取地址数据)

<!-- /TOC -->
# 1. 收货地址
## 1.1. 文档版本

|文档版本|修改日期|修改概述|
|:--|:--|:--|
|0.8|2018-12-10|初始版本|
|2.6.5|2019-06-12|adapter协议优化|

--------------------------
## 1.2. 功能说明

## 1.3. 开发指南

### 1.3.1. 收货地址字段说明 (注：字段类型为字符串)

| **名称** | **示例** | **说明** | **必填** |
| --- | --- | --- | --- |
| id | 1 | 地址标识符，用于更新或删除时指定 | 更新，会用到 |
| name | 百小度 | 收货人 | 必填 |
| phone | 18688886666 | 联系电话 | 必填 |
| l1 | pid | 省 | 必填 |
| l2 | cid | 市 | 必填 |
| l3 | ccid | 县 | 必填 |
| street | 葫芦屯村八组二大队48号 | 街道地址 | 必填 |
| zipcode | 464000 | 邮编 | 非必填 |

* 错误码

| **错误码** | **含义** | **备注** |
| --- | --- | --- |
| "0" | 正常 |   |
| "-1" | 异常 |   |
| "401" | 登陆信息异常 | 端上根据此状态码，重新登陆 |
| "400403" | 用户名称错误 | 端上视觉效果提示，不弹起Toast |
| "400402" | 电话号码错误 | 端上视觉效果提示. |
| "400404" | 街道错误 | 端上视觉效果提示，不弹起Toast |
| "400405" | 邮编错误 | 端上视觉效果提示. |

### 1.3.2. 接口请求和返回数据说明
#### 1.3.2.1. 用户添加收货地址
* 对应demo中路径：`POST /ma/address/create`（宿主可自定义）
* 请求：

```
data={
  "name": "百小度",
  "phone": "18688886666",
  "l1": "1234",
  "l2": "1234",
  "l3": "1234",
  "street": "葫芦屯村八组二大队48号",
  "zipcode": "464000",
  "scope": "true"
}
```

* 返回：

```
{
    "errno": "0",           //0正常， 401登陆异常， 其他错误码：异常
    "errmsg": "",           //用户看到的错误信息
    "request_id": "123456789",
    "data": {
        "id": "1" // 创建成功的地址编号
        "address_scope_create": {
            "permit": "true",
            "forbidden": "false",
            "type":"1", //type: 1用户相关， 2设备相关
            "grade": "1",//grade:“3”, permit 永远为"true"
            "need_apply": "0",
            "name": "使用address_scope_create框架",
            "short_name": "" //用户设置页面显示短名称
            "description": "说明为何需要使用address_scope_create框架",
            "tip_status":"0",//1：同意  0:弹框  -1:拒绝
            "rule": ["baidu.com", "iqiyi.com"]，
            "ext":{
                       
            }
       }，
    }
}
```

#### 1.3.2.2. 用户查询收货地址
* 对应demo中路径：`POST /ma/address/oa_list`（宿主可自定义）
* 请求：
* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": {                       //默认在最上，保证修改时间倒顺序。
        “list”:[
        {
            "id": "1",
            "name": "百小度",
            "phone": "13566666666",
            "phone_cipher": "135******666",
            "l1": {
                "code":"111",
                "name":"北京市",
            },
            "l2": {
                "code":"111",
                "name":"北京市",
            },
            "l3": {
                "code":"111",
                "name":"北京市",
            },
            "street": "葫芦屯村八组二大队48号",
            "zipcode": "464000"
            "default":"0",  //default:1是默认，0非默认
        },     
        {
            "id": "1",
            "name": "百小度",
            "phone": "13566666666",
            "phone_cipher": "135******666",
            "l1": {
                "code":"111",
                "name":"北京市",
            },
            "l2": {
                "code":"111",
                "name":"北京市",
            },
            "l3": {
                "code":"111",
                "name":"北京市",
            },
            "street": "葫芦屯村八组二大队48号",
            "zipcode": "464000"
            "default":"1",
        }
    ]
}
```

#### 1.3.2.3. 用户修改收货地址

* 对应demo中路径：`POST /ma/address/modify`（宿主可自定义）
* 请求：

```
data={
    "id":"1",       //必传
    "l1":"1000",    //L1,L2,L3任意修改需要L1,L2,L3同时提交，其他修改什么提交什么
    "l2":"1000",
    "l3":"1000",
}
```

* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": [
    ]
}
```

#### 1.3.2.4. 用户地址默认修改
* 对应demo中路径：`POST /ma/address/modify_default`（宿主可自定义）
* 请求:

```
data={
    "id":"1",       //必传
}
```

* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": [
    ]
}
```

#### 1.3.2.5. 用户删除收货地址


* 对应demo中路径：`POST /ma/address/del`（宿主可自定义）
* 请求:

```
data={
    "id":"1"，
}
```

* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": [
    ]
}
```


